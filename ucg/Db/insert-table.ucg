.template on
IF OBJECT_ID('dbo.$(@name:sql)_InsertTable') IS NULL
	EXEC('CREATE PROC dbo.$(@name:sql)_InsertTable AS RETURN 1')
GO

ALTER PROC dbo.$(@name:sql)_InsertTable
	@items dbo.$(@name:sql)_TABLE_TYPE 
.end
AS
INSERT INTO dbo.$(@name:sql) (
.foreach field
	[$(@name:sql)]$(",")
.end
SELECT 
.foreach field
	i.$(@name:sql)$(",")
.end
FROM @items AS i
GO